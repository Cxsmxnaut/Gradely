{
  "role": "debugger",
  "task": "Fix server-side caching of grades for Gradely accounts",
  "problem_statement": "Currently, cached grades are stored only locally (localStorage/sessionStorage), so logging into the same Gradely account on a different browser or device does not load any grades. Users see no grades until the live fetch completes, breaking the immediate-cache UX.",
  "observed_behavior": [
    "Logged into Gradely-native account on a different Chrome profile with the same credentials.",
    "Grades did not load from cache; nothing appeared until the live fetch completed (~5 seconds).",
    "This shows that caching is not tied to the Gradely account in the backend."
  ],
  "desired_behavior": [
    "Grades should be cached per Gradely account on the server/backend.",
    "When a user logs in on any device or browser, the cached grades should load immediately.",
    "After loading cached grades, a background fetch should update the data in the UI and backend."
  ],
  "instructions": [
    "Move grade caching from localStorage/sessionStorage to the Gradely backend (e.g., Supabase).",
    "Store cached grades per user and per linked StudentVUE account.",
    "Ensure login flow fetches cached grades from the server immediately.",
    "Trigger a background sync to update the grades after login.",
    "Update the cached copy on the server after the background fetch completes.",
    "Handle multiple linked accounts if the user has more than one StudentVUE account."
  ],
  "definition_of_done": [
    "Logging into the same Gradely account on any browser/device immediately shows cached grades.",
    "Background fetch updates UI and backend cache correctly.",
    "No errors in console related to grades caching or fetching.",
    "The experience matches the intended immediate-cache UX."
  ]
}